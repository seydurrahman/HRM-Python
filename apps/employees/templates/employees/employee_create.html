{% extends 'base.html' %} 
{% load static %} 
{% load widget_tweaks %}

{% block title %}Create Employee{% endblock %}

{% block content %}
<div class="container mt-4">
  <div class="card shadow-sm border-0">
    <div class="card-header bg-light border-bottom">
      <h4 class="card-title mb-0">
        <i class="fas fa-user-plus"></i> Create New Employee
      </h4>
    </div>

    <div class="card-body">
      <form method="POST" enctype="multipart/form-data" id="employeeForm">
        {% csrf_token %}

        <!-- ========================== NAV TABS ========================== -->
        <ul class="nav nav-pills mb-4" id="employeeTab" role="tablist">
          <li class="nav-item" role="presentation">
            <button
              class="nav-link active"
              id="employee-tab"
              data-bs-toggle="pill"
              data-bs-target="#employee"
              type="button"
              role="tab"
            >
              <i class="fas fa-id-card"></i> Employee Info
            </button>
          </li>
          <li class="nav-item" role="presentation">
            <button
              class="nav-link"
              id="basic-tab"
              data-bs-toggle="pill"
              data-bs-target="#basic"
              type="button"
              role="tab"
            >
              <i class="fas fa-info-circle"></i> Basic Info
            </button>
          </li>
          <li class="nav-item" role="presentation">
            <button
              class="nav-link"
              id="offical_info-tab"
              data-bs-toggle="pill"
              data-bs-target="#official_info"
              type="button"
              role="tab"
            >
              <i class="fas fa-address-book"></i> Official Info
            </button>
          </li>
          <li class="nav-item" role="presentation">
            <button
              class="nav-link"
              id="job_experience-tab"
              data-bs-toggle="pill"
              data-bs-target="#job_experience"
              type="button"
              role="tab"
            >
              <i class="fas fa-briefcase"></i> Job Experience
            </button>
          </li>
          <li class="nav-item" role="presentation">
            <button
              class="nav-link"
              id="salary_info-tab"
              data-bs-toggle="pill"
              data-bs-target="#salary_info"
              type="button"
              role="tab"
            >
              <i class="fas fa-sack-dollar"></i> Salary Info
            </button>
          </li>
          <li class="nav-item" role="presentation">
            <button
              class="nav-link"
              id="education-tab"
              data-bs-toggle="pill"
              data-bs-target="#education"
              type="button"
              role="tab"
            >
              <i class="fas fa-graduation-cap"></i> Educations
            </button>
          </li>
          <li class="nav-item" role="presentation">
            <button
              class="nav-link"
              id="leave-tab"
              data-bs-toggle="pill"
              data-bs-target="#leave"
              type="button"
              role="tab"
            >
              <i class="fas fa-calendar-check"></i> Leave Info
            </button>
          </li>
          <li class="nav-item" role="presentation">
            <button
              class="nav-link"
              id="training-tab"
              data-bs-toggle="pill"
              data-bs-target="#training"
              type="button"
              role="tab"
            >
              <i class="fas fa-certificate"></i> Training & Certification
            </button>
          </li>
          <li class="nav-item" role="presentation">
            <button
              class="nav-link"
              id="document-tab"
              data-bs-toggle="pill"
              data-bs-target="#document"
              type="button"
              role="tab"
            >
              <i class="fas fa-file-archive"></i> Documents
            </button>
          </li>
        </ul>

        <!-- ========================== TAB CONTENT ========================== -->
        <div class="tab-content" id="employeeTabContent">

          <!-- ========== EMPLOYEE INFO TAB ========== -->
          <div class="tab-pane fade show active" id="employee" role="tabpanel">
            <div class="section-title mb-3"><h5>Employee Information</h5></div>
            <div class="row">
              <div class="col-md-4 mb-3">
                {{ form.full_name_English.label_tag }} {{ form.full_name_English}}
              </div>
              <div class="col-md-4 mb-3">
                {{ form.full_name_Bangla.label_tag }} {{ form.full_name_Bangla}}
              </div>
              <div class="col-md-4 mb-3">
                {{ form.employee_id.label_tag }} {{ form.employee_id }}
              </div>
              <div class="col-md-4 mb-3">
                {{ form.designation.label_tag }} {{ form.designation }}
              </div>
              <div class="col-md-4 mb-3">
                {{ form.unit.label_tag }} {{ form.unit }}
              </div>
              <div class="col-md-4 mb-3">
    {{ form.division.label_tag }} 
    {{ form.division }}
    {% if form.division.errors %}
        <div class="text-danger">
            {% for error in form.division.errors %}
                {{ error }}
            {% endfor %}
        </div>
    {% endif %}
    <!-- Debug info -->
    <small class="form-text text-muted">
        Options: {{ form.division.field.queryset.count }}
    </small>
</div>
              <div class="col-md-4 mb-3">
                {{ form.department.label_tag }} {{ form.department }}
              </div>
              <div class="col-md-4 mb-3">
                {{ form.section.label_tag }} {{ form.section }}
              </div>
              <div class="col-md-4 mb-3">
                {{ form.sub_section.label_tag }} {{ form.sub_section }}
              </div>
              <div class="col-md-4 mb-3">
                {{ form.floor.label_tag }} {{ form.floor }}
              </div>
              <div class="col-md-4 mb-3">
                {{ form.line.label_tag }} {{ form.line }}
              </div>
              <div class="col-md-4 mb-3">
                {{ form.mobile_number.label_tag }} {{ form.mobile_number }}
              </div>
              <div class="col-md-3 mb-3">
                {{ form.photo.label_tag }} {{ form.photo }}
              </div>
              {% comment %}
              <div class="col-md-4 mb-3">
                {{ form.email.label_tag }} {{ form.email }}
              </div>
              {% endcomment %}
            </div>
          </div>

          <!-- ========== BASIC INFO TAB ========== -->
          <div class="tab-pane fade" id="basic" role="tabpanel">
            <div class="section-title mb-3"><h5>Basic Information</h5></div>
            <div class="row">
              <div class="col-md-4 mb-3">
                {{ form.date_of_birth.label_tag }} {{ form.date_of_birth }}
              </div>
              <div class="col-md-4 mb-3">
                {{ form.father_name.label_tag }} {{ form.father_name }}
              </div>
              <div class="col-md-4 mb-3">
                {{ form.father_name_Bangla.label_tag }} {{form.father_name_Bangla }}
              </div>
              <div class="col-md-4 mb-3">
                {{ form.mother_name.label_tag }} {{ form.mother_name }}
              </div>
              <div class="col-md-4 mb-3">
                {{ form.mother_name_Bangla.label_tag }} {{form.mother_name_Bangla }}
              </div>
              <div class="col-md-4 mb-3">
                {{ form.religion.label_tag }} {{ form.religion }}
              </div>
              <div class="col-md-4 mb-3">
                {{ form.nationality.label_tag }} {{ form.nationality }}
              </div>
              <div class="col-md-4 mb-3">
                {{ form.nid_number.label_tag }} {{ form.nid_number }}
              </div>
              <div class="col-md-4 mb-3">
                {{ form.nid_image.label_tag }} {{ form.nid_image }}
              </div>
              <div class="col-md-4 mb-3">
                {{ form.birth_Reg.label_tag }} {{ form.birth_Reg }}
              </div>
              <div class="col-md-4 mb-3">
                {{ form.birth_Reg_image.label_tag }} {{ form.birth_Reg_image }}
              </div>
              <div class="col-md-4 mb-3">
                {{ form.passport_number.label_tag }} {{ form.passport_number }}
              </div>
              <div class="col-md-4 mb-3">
                {{ form.passport_image.label_tag }} {{ form.passport_image }}
              </div>
              <div class="col-md-4 mb-3">
                {{ form.personal_email.label_tag }} {{ form.personal_email }}
              </div>
              <div class="col-md-4 mb-3">
                {{ form.gender.label_tag }} {{ form.gender }}
              </div>
              <div class="col-md-4 mb-3">
                {{ form.marital_status.label_tag }} {{ form.marital_status }}
              </div>
              <div class="col-md-4 mb-3">
                {{ form.blood_grp.label_tag }} {{ form.blood_grp }}
              </div>
              <div class="col-full mb-3">
                <h5
                  class="d-inline"
                  style="
                    background-color: #0d6efd;
                    color: white;
                    padding: 4px 8px;
                    border-radius: 4px;
                  "
                >
                  Nominee Information
                </h5>
              </div>
              <div class="col-md-4 mb-3">
                {{ form.nominee_name.label_tag }} {{ form.nominee_name }}
              </div>
              <div class="col-md-4 mb-3">
                {{ form.nominee_name_Bangla.label_tag }} {{form.nominee_name_Bangla }}
              </div>
              <div class="col-md-4 mb-3">
                {{ form.nominee_relation.label_tag }} {{ form.nominee_relation}}
              </div>
              <div class="col-md-4 mb-3">
                {{ form.nominee_nid.label_tag }} {{ form.nominee_nid }}
              </div>
              <div class="col-md-4 mb-3">
                {{ form.nominee_nid_image.label_tag }} {{ form.nominee_nid_image}}
              </div>
              <div class="col-md-4 mb-3">
                {{ form.nominee_photo.label_tag }} {{ form.nominee_photo }}
              </div>
              <div class="col-md-4 mb-3">
                {{ form.nominee_mobile.label_tag }} {{ form.nominee_mobile }}
              </div>
              <div class="col-md-4 mb-3">
                {{ form.nominee_country.label_tag }} {{ form.nominee_country }}
              </div>
              <div class="col-md-4 mb-3">
                {{ form.nominee_division.label_tag }} {{ form.nominee_division}}
              </div>
              <div class="col-md-4 mb-3">
                {{ form.nominee_district.label_tag }} {{ form.nominee_district}}
              </div>
              <div class="col-md-4 mb-3">
                {{ form.nominee_thana.label_tag }} {{ form.nominee_thana }}
              </div>
              <div class="col-md-4 mb-3">
                {{ form.nominee_post_office.label_tag }} {{form.nominee_post_office }}
              </div>
              <div class="col-md-4 mb-3">
                {{ form.nominee_postal_code.label_tag }} {{form.nominee_postal_code }}
              </div>
              <div class="col-md-4 mb-3">
                {{ form.nominee_village.label_tag }} {{ form.nominee_village }}
              </div>
              <div class="col-md-4 mb-3">
                {{ form.nominee_address_line.label_tag }} {{form.nominee_address_line }}
              </div>
              <div class="col-full mb-3">
                <h5
                  class="d-inline"
                  style="
                    background-color: #0d6efd;
                    color: white;
                    padding: 4px 8px;
                    border-radius: 4px;
                  "
                >
                  Emegency Contact
                </h5>
              </div>
              <div class="col-md-4 mb-3">
                {{ form.emergency_contact_name.label_tag }} {{form.emergency_contact_name }}
              </div>
              <div class="col-md-4 mb-3">
                {{ form.emergency_contact_number.label_tag }} {{form.emergency_contact_number }}
              </div>
              <div class="col-md-4 mb-3">
                {{ form.emergency_contact_relation.label_tag }} {{form.emergency_contact_relation }}
              </div>
              <div class="col-full mb-3">
                <h5
                  class="d-inline"
                  style="
                    background-color: #0d6efd;
                    color: white;
                    padding: 4px 8px;
                    border-radius: 4px;
                  "
                >
                  Present Address
                </h5>
              </div>
              <div class="col-md-4 mb-3">
                {{ form.country.label_tag }} {{ form.country }}
              </div>
              <div class="col-md-4 mb-3">
                {{ form.division.label_tag }} {{ form.division }}
              </div>
              <div class="col-md-4 mb-3">
                {{ form.district.label_tag }} {{ form.district }}
              </div>
              <div class="col-md-4 mb-3">
                {{ form.thana.label_tag }} {{ form.thana }}
              </div>
              <div class="col-md-4 mb-3">
                {{ form.post_office.label_tag }} {{ form.post_office }}
              </div>
              <div class="col-md-4 mb-3">
                {{ form.post_office_Bangla.label_tag }} {{form.post_office_Bangla }}
              </div>
              <div class="col-md-4 mb-3">
                {{ form.postal_code.label_tag }} {{ form.postal_code }}
              </div>
              <div class="col-md-4 mb-3">
                {{ form.village.label_tag }} {{ form.village }}
              </div>
              <div class="col-md-4 mb-3">
                {{ form.address_line.label_tag }} {{ form.address_line }}
              </div>
              <div class="col-md-4 mb-3">
                {{ form.address_line_Bangla.label_tag }} {{form.address_line_Bangla }}
              </div>
              <div class="col-full mb-3">
                <h5
                  class="d-inline"
                  style="
                    background-color: #0d6efd;
                    color: white;
                    padding: 4px 8px;
                    border-radius: 4px;
                  "
                >
                  Permanent Address
                </h5>
              </div>
              <div class="col-md-4 mb-3">
                {{ form.country.label_tag }} {{ form.country }}
              </div>
              <div class="col-md-4 mb-3">
                {{ form.division.label_tag }} {{ form.division }}
              </div>
              <div class="col-md-4 mb-3">
                {{ form.district.label_tag }} {{ form.district }}
              </div>
              <div class="col-md-4 mb-3">
                {{ form.thana.label_tag }} {{ form.thana }}
              </div>
              <div class="col-md-4 mb-3">
                {{ form.post_office.label_tag }} {{ form.post_office }}
              </div>
              <div class="col-md-4 mb-3">
                {{ form.post_office_Bangla.label_tag }} {{form.post_office_Bangla }}
              </div>
              <div class="col-md-4 mb-3">
                {{ form.postal_code.label_tag }} {{ form.postal_code }}
              </div>
              <div class="col-md-4 mb-3">
                {{ form.village.label_tag }} {{ form.village }}
              </div>
              <div class="col-md-4 mb-3">
                {{ form.address_line.label_tag }} {{ form.address_line }}
              </div>
              <div class="col-md-4 mb-3">
                {{ form.address_line_Bangla.label_tag }} {{form.address_line_Bangla }}
              </div>
              <div class="col-full mb-3">
                <h5
                  class="d-inline"
                  style="
                    background-color: #0d6efd;
                    color: white;
                    padding: 4px 8px;
                    border-radius: 4px;
                  "
                >
                  Local Authority
                </h5>
              </div>
              <div class="col-md-4 mb-3">
                {{ form.local_guardian_name.label_tag }} {{form.local_guardian_name }}
              </div>
              <div class="col-md-4 mb-3">
                {{ form.local_guardian_number.label_tag }} {{form.local_guardian_number }}
              </div>
              <div class="col-md-4 mb-3">
                {{ form.local_guardian_relation.label_tag }} {{form.local_guardian_relation }}
              </div>
              <div class="col-md-4 mb-3">
                {{ form.local_guardian_address.label_tag }} {{form.local_guardian_address }}
              </div>
              <div class="col-full mb-3">
                <h5
                  class="d-inline"
                  style="
                    background-color: #0d6efd;
                    color: white;
                    padding: 4px 8px;
                    border-radius: 4px;
                  "
                >
                  Health & Appearance
                </h5>
              </div>
              <div class="col-md-4 mb-3">
                {{ form.Indentity_sign.label_tag }} {{ form.Indentity_sign }}
              </div>
              <div class="col-md-4 mb-3">
                {{ form.weight.label_tag }} {{ form.weight }}
              </div>
              <div class="col-md-4 mb-3">
                {{ form.height.label_tag }} {{ form.height }}
              </div>
              <div class="col-md-4 mb-3">
                {{ form.blood_group.label_tag }} {{ form.blood_group }}
              </div>
            </div>
          </div>

          <!-- ========== OFFICIAL INFO TAB ========== -->
          <div class="tab-pane fade" id="official_info" role="tabpanel">
            <div class="section-title mb-3"><h5>Official Information</h5></div>
            <div class="row">
              <div class="col-md-4 mb-3">
                {{ form.device_id.label_tag }} {{ form.device_id }}
              </div>
              <div class="col-md-4 mb-3">
                {{ form.employee_type.label_tag }} {{ form.employee_type }}
              </div>
              <div class="col-md-4 mb-3">
                {{ form.employment_type.label_tag }} {{ form.employment_type }}
              </div>
              <div class="col-md-4 mb-3">
                {{ form.employee_category.label_tag }} {{ form.employee_category}}
              </div>
              <div class="col-md-4 mb-3">
                {{ form.group.label_tag }} {{ form.group }}
              </div>
              <div class="col-md-4 mb-3">
                {{ form.grade.label_tag }} {{ form.grade }}
              </div>
              <div class="col-md-4 mb-3">
                {{ form.date_of_joining.label_tag }} {{ form.date_of_joining }}
              </div>
              <div class="col-md-4 mb-3">
                {{ form.date_of_confirmation.label_tag }} {{form.date_of_confirmation }}
              </div>
              <div class="col-md-4 mb-3">
                {{ form.reporting_manager.label_tag }} {{ form.reporting_manager}}
              </div>
              <div class="col-md-4 mb-3">
                {{ form.work_shift.label_tag }} {{ form.work_shift }}
              </div>
              <div class="col-md-4 mb-3">
                {{ form.weekend.label_tag }} {{ form.weekend }}
              </div>
              <div class="col-md-4 mb-3">
                {{ form.disburse_type.label_tag }} {{ form.disburse_type }}
              </div>
              <div class="col-md-4 mb-3">
                {{ form.mfs_number.label_tag }} {{ form.mfs_number }}
              </div>
              <div class="col-md-4 mb-3">
                {{ form.mobile_number.label_tag }} {{ form.mobile_number }}
              </div>
              <div class="col-md-4 mb-3">
                {{ form.email.label_tag }} {{ form.email }}
              </div>
              <div class="col-md-4 mb-3">
                {{ form.work_location.label_tag }} {{ form.work_location }}
              </div>
              <div class="col-md-4 mb-3">
                {{ form.bgmea_id.label_tag }} {{ form.bgmea_id }}
              </div>
              <div class="col-md-4 mb-3">
                {{ form.bkmea_id.label_tag }} {{ form.bkmea_id }}
              </div>
              <div class="col-full mb-3">
                <h5
                  class="d-inline"
                  style="
                    background-color: #0d6efd;
                    color: white;
                    padding: 4px 8px;
                    border-radius: 4px;
                  "
                >
                  Bank Information
                </h5>
              </div>
              <div class="col-md-4 mb-3">
                {{ form.bank_name.label_tag }} {{ form.bank_name }}
              </div>
              <div class="col-md-4 mb-3">
                {{ form.bank_account_number.label_tag }} {{form.bank_account_number }}
              </div>
              <div class="col-md-4 mb-3">
                {{ form.bank_branch.label_tag }} {{ form.bank_branch }}
              </div>
              <div class="col-md-4 mb-3">
                {{ form.amount_in_bank.label_tag }} {{ form.amount_in_bank }}
              </div>
              <div class="col-md-4 mb-3">
                {{ form.tin_number.label_tag }} {{ form.tin_number }}
              </div>
              <div
                class="d-flex justify-content-center align-items-center col-md-4 mb-3"
              >
                <div class="form-check me-3 d-flex align-items-center">
                  {{ form.software_user|add_class:"form-check-input mt-0 me-2"}}
                  <label
                    class="form-check-label"
                    for="{{ form.software_user.id_for_label }}"
                  >
                    Software User
                  </label>
                </div>
                <div class="form-check d-flex align-items-center">
                  {{ form.panel_user|add_class:"form-check-input mt-0 me-2" }}
                  <label
                    class="form-check-label"
                    for="{{ form.panel_user.id_for_label }}"
                  >
                    Panel User
                  </label>
                </div>
              </div>
              <div class="col-md-4 mb-3">
                <div class="mb-2">{{ form.transport.label_tag }}</div>
                <div
                  class="d-flex justify-content-start align-items-center gap-3"
                >
                  <div class="form-check d-flex align-items-center">
                    {{ form.transport|add_class:"form-check-input mt-0 me-2"}}
                    <label
                      class="form-check-label"
                      for="{{ form.transport.id_for_label }}"
                      >Yes</label
                    >
                  </div>
                  <div class="form-check d-flex align-items-center">
                    {{ form.transport|add_class:"form-check-input mt-0 me-2" }}
                    <label
                      class="form-check-label"
                      for="{{ form.transport.id_for_label }}"
                      >No</label
                    >
                  </div>
                </div>
              </div>
              <div class="col-md-4 mb-3">
                <div class="mb-2">{{ form.food_allowance.label_tag }}</div>
                <div
                  class="d-flex justify-content-start align-items-center gap-3"
                >
                  <div class="form-check d-flex align-items-center">
                    {{ form.food_allowance|add_class:"form-check-input mt-0 me-2"}}
                    <label
                      class="form-check-label"
                      for="{{ form.food_allowance.id_for_label }}"
                      >Yes</label
                    >
                  </div>
                  <div class="form-check d-flex align-items-center">
                    {{ form.food_allowance|add_class:"form-check-input mt-0 me-2" }}
                    <label
                      class="form-check-label"
                      for="{{ form.food_allowance.id_for_label }}"
                      >No</label
                    >
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- ========== JOB EXPERIENCE TAB ========== -->
          <div class="tab-pane fade" id="job_experience" role="tabpanel">
            <div class="section-title mb-3"><h5>Job Experience</h5></div>
            <div id="experience-container">
            <div class="row experience-row align-items-end">
            <div class="col-md-4 mb-3">{{ form.company_name.label_tag }} {{ form.company_name }}</div>
            <div class="col-md-4 mb-3">{{ form.department.label_tag }} {{ form.department }}</div>
            <div class="col-md-4 mb-3">{{ form.designation.label_tag }} {{ form.designation }}</div>
            <div class="col-md-4 mb-3">{{ form.start_date.label_tag }} {{ form.start_date }}</div>
            <div class="col-md-4 mb-3">{{ form.end_date.label_tag }} {{ form.end_date }}</div>
            <div class="col-md-4 mb-3">{{ form.reason_for_leaving.label_tag }} {{ form.reason_for_leaving }}</div>
            <div class="col-md-4 mb-3">{{ form.experienced.label_tag }} {{ form.experienced }}</div>
            <div class="col-md-4 mb-3">{{ form.experienced_certificate.label_tag }} {{ form.experienced_certificate }}</div>
            <div class="col-md-4 mb-3">{{ form.remarks.label_tag }} {{ form.remarks }}</div>
            </div>
        </div>

        <div class="mb-3">
        <button type="button" id="add-experience" class="btn btn-success">+</button>
        </div>
           
          </div>

          <!-- ========== Salary Info TAB ========== -->
          <div class="tab-pane fade" id="salary_info" role="tabpanel">
            <div class="section-title mb-3"><h5>Salary Policy</h5></div>
            <div class="row">
              <div class="col-md-4 mb-3">
                <label for="{{ form.date_of_joining.id_for_label }}">Effective Date(JD)</label>{{ form.date_of_joining }}
              </div>
              <div class="col-md-4 mb-3">
                {{ form.salary_policy.label_tag }} {{form.salary_policy }}
              </div>
              <div class="col-md-4 mb-3">
                {{ form.gross_salary.label_tag }} {{ form.gross_salary }}
              </div>
              <div class="col-md-4 mb-3">
                {{ form.basic_salary.label_tag }} {{ form.basic_salary }}
              </div>
              <div class="col-md-4 mb-3">
                {{ form.house_rent.label_tag }} {{ form.house_rent }}
              </div>
              <div class="col-md-4 mb-3">
                {{ form.transport_allowance.label_tag }} {{ form.transport_allowance }}
              </div>
              <div class="col-md-4 mb-3">
                {{ form.mobile_bill.label_tag }} {{ form.mobile_bill }}
              </div>
              <div class="col-md-4 mb-3">
                {{ form.food_allowance.label_tag }} {{ form.food_allowance }}
              </div>
              <div class="col-md-4 mb-3">
                {{ form.medical_allowance.label_tag }} {{ form.medical_allowance }}
              </div>
              <div class="col-md-4 mb-3">
                {{ form.other_conveyence.label_tag }} {{ form.other_conveyence }}
              </div>
              <div class="col-md-4 mb-3">
                {{ form.attendance_bonus.label_tag }} {{ form.attendance_bonus }}
              </div>
              <div class="col-md-4 mb-3">
                {{ form.tax_deduction.label_tag }} {{ form.tax_deduction }}
              </div>
              <div class="col-md-4 mb-3">
                {{ form.insurance.label_tag }} {{ form.insurance }}
              </div>
              <div class="col-md-4 mb-3">
                {{ form.stamp.label_tag }} {{ form.stamp }}
              </div>
              <div class="col-md-4 mb-3">
                {{ form.salary_mode.label_tag }} {{ form.salary_mode }}
              </div>
              <div class="col-md-4 mb-3">
                {{ form.tin_number.label_tag }} {{ form.tin_number }}
              </div>
              <div
                class="d-flex justify-content-center align-items-center col-md-4 mb-3"
              >
                <div class="form-check me-3 d-flex align-items-center">
                  {{ form.pF_applicable|add_class:"form-check-input mt-0 me-2"}}
                  <label
                    class="form-check-label"
                    for="{{ form.pF_applicable.id_for_label }}"
                  >
                    PF Applicable
                  </label>
                </div>
                <div class="form-check me-3 d-flex align-items-center">
                  {{ form.late_deduct|add_class:"form-check-input mt-0 me-2"}}
                  <label
                    class="form-check-label"
                    for="{{ form.late_deduct.id_for_label }}"
                  >
                    Late Deduct
                  </label>
                </div>
              </div>
              <div
                class="d-flex justify-content-center align-items-center col-md-4 mb-3"
              >
                <div class="form-check me-3 d-flex align-items-center">
                  {{ form.transport_deduct|add_class:"form-check-input mt-0 me-2"}}
                  <label
                    class="form-check-label"
                    for="{{ form.transport_deduct.id_for_label }}"
                  >
                    Transport Deduct
                  </label>
                </div>
                <div class="form-check me-3 d-flex align-items-center">
                  {{ form.food_deduct|add_class:"form-check-input mt-0 me-2"}}
                  <label
                    class="form-check-label"
                    for="{{ form.food_deduct.id_for_label }}"
                  >
                    Food Deduct
                  </label>
                </div>
              </div>
            </div>
          </div>


          <!-- ========== Educations info TAB ========== -->

          <div class="tab-pane fade" id="education" role="tabpanel">
            <div class="section-title mb-3"><h5>Educations</h5></div>

            <div id="educations-container">
              <!-- first row (template row) -->
              <div class="row educations-row align-items-end">
                <div class="col-md-4 mb-3">{{ form.degree_Name.label_tag }} {{ form.degree_Name }}</div>
                <div class="col-md-4 mb-3">{{ form.institue.label_tag }} {{ form.institue }}</div>
                <div class="col-md-4 mb-3">{{ form.board.label_tag }} {{ form.board }}</div>
                <div class="col-md-4 mb-3">{{ form.subject.label_tag }} {{ form.subject }}</div>
                <div class="col-md-4 mb-3">{{ form.passing_year.label_tag }} {{ form.passing_year }}</div>
                <div class="col-md-4 mb-3">{{ form.result.label_tag }} {{ form.result }}</div>
                <div class="col-md-4 mb-3">{{ form.certificate.label_tag }} {{ form.certificate }}</div>
                <!-- Note: first row should NOT include a remove button -->
              </div>
          </div>
            <div class="mb-3">
              <!-- new add button for education -->
              <button type="button" id="add-education" class="btn btn-success">+</button>
            </div>
          </div>


          <!-- ========== Leave Info ============ -->
           <div class="tab-pane fade" id="leave" role="tabpanel">
            <div class="section-title mb-3"><h5>Leave Info</h5></div>
            <div class="row">
              <div class="col-md-4 mb-3">
                <label for="{{ form.date_of_joining.id_for_label }}">Effective Date(JD)</label>{{ form.date_of_joining }}
              </div>

              <div class="col-md-4 mb-3">
                <div class="form-check me-3 d-flex align-items-center">
                  {{ form.transport_deduct|add_class:"form-check-input mt-0 me-2"}}
                  <label
                    class="form-check-label"
                    for="{{ form.transport_deduct.id_for_label }}"
                  >
                    Sick Leave
                  </label>
                </div>
                {{form.salary_policy }}
              </div>

              <div class="col-md-4 mb-3">
                <div class="form-check me-3 d-flex align-items-center">
                  {{ form.transport_deduct|add_class:"form-check-input mt-0 me-2"}}
                  <label
                    class="form-check-label"
                    for="{{ form.transport_deduct.id_for_label }}"
                  >
                    Casual Leave
                  </label>
                </div>
                {{form.salary_policy }}
              </div>

              <div class="col-md-4 mb-3">
                <div class="form-check me-3 d-flex align-items-center">
                  {{ form.transport_deduct|add_class:"form-check-input mt-0 me-2"}}
                  <label
                    class="form-check-label"
                    for="{{ form.transport_deduct.id_for_label }}"
                  >
                    Earn Leave
                  </label>
                </div>
                {{form.salary_policy }}
              </div>

              <div class="col-md-4 mb-3">
                <div class="form-check me-3 d-flex align-items-center">
                  {{ form.transport_deduct|add_class:"form-check-input mt-0 me-2"}}
                  <label
                    class="form-check-label"
                    for="{{ form.transport_deduct.id_for_label }}"
                  >
                    Maternity Leave
                  </label>
                </div>
                {{form.salary_policy }}
              </div>

              <div class="col-md-4 mb-3">
                <div class="form-check me-3 d-flex align-items-center">
                  {{ form.transport_deduct|add_class:"form-check-input mt-0 me-2"}}
                  <label
                    class="form-check-label"
                    for="{{ form.transport_deduct.id_for_label }}"
                  >
                    Parental Leave
                  </label>
                </div>
                {{form.salary_policy }}
              </div>

              <div class="col-md-4 mb-3">
                <div class="form-check me-3 d-flex align-items-center">
                  {{ form.transport_deduct|add_class:"form-check-input mt-0 me-2"}}
                  <label
                    class="form-check-label"
                    for="{{ form.transport_deduct.id_for_label }}"
                  >
                    Annual Leave
                  </label>
                </div>
                {{form.salary_policy }}
              </div>

              <div class="col-md-4 mb-3">
                <div class="form-check me-3 d-flex align-items-center">
                  {{ form.transport_deduct|add_class:"form-check-input mt-0 me-2"}}
                  <label
                    class="form-check-label"
                    for="{{ form.transport_deduct.id_for_label }}"
                  >
                    Specail Leave
                  </label>
                </div>
                {{form.salary_policy }}
              </div>

              <div class="col-md-4 mb-3">
                <div class="form-check me-3 d-flex align-items-center">
                  {{ form.transport_deduct|add_class:"form-check-input mt-0 me-2"}}
                  <label
                    class="form-check-label"
                    for="{{ form.transport_deduct.id_for_label }}"
                  >
                    Compensatory Leave
                  </label>
                </div>
                {{form.salary_policy }}
              </div>

              <div class="col-md-4 mb-3">
                <div class="form-check me-3 d-flex align-items-center">
                  {{ form.transport_deduct|add_class:"form-check-input mt-0 me-2"}}
                  <label
                    class="form-check-label"
                    for="{{ form.transport_deduct.id_for_label }}"
                  >
                    Unpaid Leave
                  </label>
                </div>
                {{form.salary_policy }}
              </div>

            </div>

            </div>

            <!-- ========== Trainig & certificate ======= -->
          <div class="tab-pane fade" id="training" role="tabpanel">
            <div class="section-title mb-3"><h5>Training & Certificate</h5></div>

            <div id="training-container">
              <!-- first row (template row) -->
              <div class="row training-row align-items-end">
                <div class="col-md-4 mb-3">{{ form.training_name.label_tag }} {{ form.training_name }}</div>
                <div class="col-md-4 mb-3">{{ form.institue_name.label_tag }} {{ form.institue_name }}</div>
                <div class="col-md-4 mb-3">{{ form.duration_Month.label_tag }} {{ form.duration_Month }}</div>
                <div class="col-md-4 mb-3">{{ form.score.label_tag }} {{ form.score }}</div>
                <div class="col-md-4 mb-3">{{ form.remarks.label_tag }} {{ form.remarks }}</div>
                <div class="col-md-4 mb-3">{{ form.certificate.label_tag }} {{ form.certificate }}</div>
                <!-- Note: first row should NOT include a remove button -->
              </div>
            </div>

            <div class="mb-3">
              <!-- new add button for education -->
              <button type="button" id="add-training" class="btn btn-success">+</button>
            </div>
          </div>
            

      
          <!-- ========== Documents TAB ========== -->
          <div class="tab-pane fade" id="document" role="tabpanel">
            <div class="section-title mb-3">
              <h5>Documents</h5>
            </div>
              <div class="col-full mb-3">
                <h5
                  class="d-inline"
                  style="
                    background-color: #0d6efd;
                    color: white;
                    padding: 4px 8px;
                    border-radius: 4px;
                  "
                >
                  Personal Docs
                </h5>
              </div>
              <div id="document-container">
                <!-- first row -->
                <div class="row document-row align-items-center mb-3">
                  <!-- Label -->
                  <div class="col-md-2">
                    {{ form.certificate.label_tag }}
                  </div>

                  <!-- File input -->
                  <div class="col-md-4">
                    {{ form.certificate }}
                  </div>

                </div>
                <div class="row document-row align-items-center mb-3">
                  <!-- Label -->
                  <div class="col-md-2">
                    {{ form.certificate.label_tag }}
                  </div>

                  <!-- File input -->
                  <div class="col-md-4">
                    {{ form.certificate }}
                  </div>

                </div>
                <div class="row document-row align-items-center mb-3">
                  <!-- Label -->
                  <div class="col-md-2">
                    {{ form.certificate.label_tag }}
                  </div>

                  <!-- File input -->
                  <div class="col-md-4">
                    {{ form.certificate }}
                  </div>

                </div>
                 <div class="col-full mb-3">
                <h5
                  class="d-inline"
                  style="
                    background-color: #0d6efd;
                    color: white;
                    padding: 4px 8px;
                    border-radius: 4px;
                  "
                >
                  Education Docs
                </h5>
              </div>
                <div class="row document-row align-items-center mb-3">
                  <!-- Label -->
                  <div class="col-md-2">
                    {{ form.certificate.label_tag }}
                  </div>

                  <!-- File input -->
                  <div class="col-md-4">
                    {{ form.certificate }}
                  </div>

                </div>
                <div class="row document-row align-items-center mb-3">
                  <!-- Label -->
                  <div class="col-md-2">
                    {{ form.certificate.label_tag }}
                  </div>

                  <!-- File input -->
                  <div class="col-md-4">
                    {{ form.certificate }}
                  </div>

                </div>
                <div class="row document-row align-items-center mb-3">
                  <!-- Label -->
                  <div class="col-md-2">
                    {{ form.certificate.label_tag }}
                  </div>

                  <!-- File input -->
                  <div class="col-md-4">
                    {{ form.certificate }}
                  </div>

                </div>
                <div class="row document-row align-items-center mb-3">
                  <!-- Label -->
                  <div class="col-md-2">
                    {{ form.certificate.label_tag }}
                  </div>

                  <!-- File input -->
                  <div class="col-md-4">
                    {{ form.certificate }}
                  </div>

                </div>
                 <div class="col-full mb-3">
                <h5
                  class="d-inline"
                  style="
                    background-color: #0d6efd;
                    color: white;
                    padding: 4px 8px;
                    border-radius: 4px;
                  "
                >
                  Experienced Docs
                </h5>
              </div>
                <div class="row document-row align-items-center mb-3">
                  <!-- Label -->
                  <div class="col-md-2">
                    {{ form.certificate.label_tag }}
                  </div>

                  <!-- File input -->
                  <div class="col-md-4">
                    {{ form.certificate }}
                  </div>

                </div>
                <div class="row document-row align-items-center mb-3">
                  <!-- Label -->
                  <div class="col-md-2">
                    {{ form.certificate.label_tag }}
                  </div>

                  <!-- File input -->
                  <div class="col-md-4">
                    {{ form.certificate }}
                  </div>

                </div>
                 <div class="col-full mb-3">
                <h5
                  class="d-inline"
                  style="
                    background-color: #0d6efd;
                    color: white;
                    padding: 4px 8px;
                    border-radius: 4px;
                  "
                >
                  Training Docs
                </h5>
              </div>
                <div class="row document-row align-items-center mb-3">
                  <!-- Label -->
                  <div class="col-md-2">
                    {{ form.certificate.label_tag }}
                  </div>

                  <!-- File input -->
                  <div class="col-md-4">
                    {{ form.certificate }}
                  </div>

                </div>
                <div class="row document-row align-items-center mb-3">
                  <!-- Label -->
                  <div class="col-md-2">
                    {{ form.certificate.label_tag }}
                  </div>

                  <!-- File input -->
                  <div class="col-md-4">
                    {{ form.certificate }}
                  </div>

                </div>

              </div>
            </div>

          

        </div>

        


        <!-- ========== BUTTONS ========== -->
        <div class="row mt-4">
          <div class="col-md-12 d-flex justify-content-between">
            <a href="{% url 'employees:list' %}" class="btn btn-secondary">
              <i class="fas fa-arrow-left"></i> Back to List
            </a>
            <button type="submit" class="btn btn-primary">
              <i class="fas fa-save"></i> Create Employee
            </button>
          </div>
        </div>

      </form>
      <script>
// Using fetch API; no jQuery needed. Works for GET requests.
document.addEventListener('DOMContentLoaded', function() {
  const companyUnitSelect = document.getElementById('id_unit');
  const divisionSelect = document.getElementById('id_division');

  if (!companyUnitSelect) return;

  companyUnitSelect.addEventListener('change', function() {
    const companyUnitId = this.value;
    // clear current options
    divisionSelect.innerHTML = '<option value="">---------</option>';

    if (!companyUnitId) {
      return; // nothing selected
    }

    const url = "{% url 'employees:ajax_load_divisions' %}?unit=" + companyUnitId;
    fetch(url, {
      headers: {
        'X-Requested-With': 'XMLHttpRequest'
      }
    })
    .then(response => response.json())
    .then(data => {
      data.divisions.forEach(function(d) {
        const opt = document.createElement('option');
        opt.value = d.id;
        opt.text = d.name;
        divisionSelect.appendChild(opt);
      });
    })
    .catch(err => {
      console.error('Error loading divisions:', err);
    });
  });
});
</script>
    </div>
  </div>
</div>

<!-- ========================== STYLES ========================== -->
<style>
  .nav-pills .nav-link {
    border-radius: 30px;
    font-weight: 500;
  }
  .nav-pills .nav-link.active {
    background-color: #0d6efd;
  }
  .section-title h5 {
    border-bottom: 2px solid #dee2e6;
    padding-bottom: 6px;
    font-weight: 600;
  }
  .form-label {
    font-weight: 500;
  }
  .btn {
    min-width: 150px;
  }
</style>
{% endblock %}
